@model Estrategia
@{
    ViewData["Title"] = "AdministrarPIID";
    Layout = "~/Views/Shared/_Layout.cshtml";
    IEnumerable<ObjetivosEstrategiasViewModel> objetivos = ViewBag.Lista;
    IEnumerable<Objetivo> NoVigente = ViewBag.NoVigentes;
    //ObjetivosEstrategiasViewModel OEVm = ViewBag.VM;
    //var num = ViewBag.IdObjetivo;
    //List<Estrategia> estrategias = ViewBag.Estrategias;

}
<main>
    <nav>
        <div class="fabs" id="options">
            <a href="javascript:showM('popedit');" class="material-icons fab-button hint--left" aria-label="Editar">edit</a>
            <a href="javascript:showM('popdelete');" class="material-icons fab-button  hint--left openpopup" aria-label="Eliminar">delete</a>
        </div>
        <ul class="fabSubfab">
            <li>
                <a href="#" class="material-icons fab-button  hint--left" aria-label="Añadir nuevo">add</a>
                <ul>
                    <li>
                        <a href="javascript:showM('popadd');">Añadir objetivo</a>
                    </li>
                    <li>
                        <a href="javascript:showM('popaddE');">Añadir estrategia</a>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>

    <div class="divtablaObj">
        <ol>
            <li>
                <table class="tablaObj">
                    @foreach (ObjetivosEstrategiasViewModel obje in objetivos)
                    {
                        <tr id="thObj">

                            <th id="@obje.Id" class="Dato">@obje.Nombre</th>
                        </tr>
                        @foreach (Estrategia item in obje.ListaEstregias)
                        {
                            <tr id="filaEst">
                                
                                <td id="@item.Id" class="estN">@item.Nombre</td>
                            </tr>
                        }
                    }
                </table>
            </li>
        </ol>
    </div>
</main>
@Html.Raw(ViewBag.Message)
<div class="container-all" id="popdelete" style="display:none;">
    <section class="popup" style="visibility:visible;">
        <label id="ElimPass">¿Eliminar?</label>
        <form class="formAjax"  method="post">
            <input id="deleteId" name="delO"  hidden />
            
            <div class="btnpop">
                <input type="submit" class="confirm" onclick="location.javascript;HideM('popdelete');" value="Aceptar" />
                <button type="button" class="cancel" onclick="location.javascript;HideM('popdelete');">Cancelar</button>
            </div>
        </form>
    </section>
</div>
<div class="container-all" id="popadd" style="display:none;">
    <section class="popup" style="visibility:visible;">
        <form method="post" action="~/PIID/Nuevo" class="formAjax">
            <label>Agregar</label>
            <label>Objetivo:</label>
            <select asp-for="Id">
                <option selected="selected">-- Objetivos --</option>
                @foreach (Objetivo item in NoVigente)
                {
                    <option value="@item.Id">@item.Nombre</option>
                }
            </select>
            <p class="error"></p>
            <div>
                <button class="cancel" onclick="location.javascript;HideM('popadd');">Cancelar</button>
                <button class="confirm" type="submit">Añadir</button>
            </div>
        </form>
    </section>
</div>
<div>
    <script>
       
    
    function editar(id) {
        $.post('@Url.Action("GetObjetivo", "PIID")', { "idObjetivo": id }, function (data, status) {
				if (data != false) {
                    var y = $("#ModalEdit form");
                    y.find("#MostrarEst").val(data.Nombre);

				}
			});
    }

    </script>
</div>
<div class="container-all" id="popaddE" style="display:none;">
    <section class="popup" style="visibility:visible;">
        <form method="post" action="~/PIID/Agregar" class="formAjax">
            <label>Agregar</label>
            <h1>Estrategia:</h1>
            <input class="agregarObj" type="text" />
            <p class="error"></p>
            <div>
                <button class="cancel" onclick="location.javascript;HideM('popaddE');">Cancelar</button>
                <button class="confirm" type="submit">Añadir</button>
            </div>
        </form>
    </section>
</div>
<div class="container-all" id="popedit" style="display:none;">
    <section class="popup" style="visibility:visible;" id="ModalEdit">
        <form method="post" action="~/PIID/Editar" class="formAjax">
            <label>Editar</label>
            <h1>Estrategia:</h1>
            <input asp-for="Nombre" class="agregarObj" id="MostrarEst" type="text" />
            <p class="error"></p>
            <div>
                <button class="cancel" onclick="location.javascript;HideM('popedit');">Cancelar</button>
                <button class="confirm" type="submit">Añadir</button>
            </div>
        </form>
    </section>
</div>
<script src="~/scripts/funciones.js"></script>